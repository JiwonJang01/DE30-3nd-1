# í¸ì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤

![](https://velog.velcdn.com/images/devysy55/post/d9322d56-34ae-41b9-8a06-ca71a931510b/image.png)

## íˆ´

### ë°±ì—”ë“œ

<img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=whitee" />  

<img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white" />  

<img src="https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=Spring-Security&logoColor=white" />  

### í”„ë¡ íŠ¸
<img src="https://img.shields.io/badge/HTML-239120?style=for-the-badge&logo=html5&logoColor=white" /> 

<img src="https://img.shields.io/badge/CSS-239120?&style=for-the-badge&logo=css3&logoColor=white" /> 
 
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white" />  

### DB
<img src="https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white" />  


### ì‘ì—…íˆ´
<img src="https://img.shields.io/badge/IntelliJ_IDEA-000000.svg?style=for-the-badge&logo=intellij-idea&logoColor=white" />  

## ëª©ì°¨

[í”„ë¡œì íŠ¸ ê°œìš”](https://github.com/pladata-encore/DE30-3nd-1/tree/main?tab=readme-ov-file#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B0%9C%EC%9A%94)

[ë°±ì—”ë“œ](https://github.com/pladata-encore/DE30-3nd-1/tree/main?tab=readme-ov-file#%EB%B0%B1%EC%97%94%EB%93%9C-1)

[í”„ë¡ íŠ¸](https://github.com/pladata-encore/DE30-3nd-1/tree/main?tab=readme-ov-file#%ED%94%84%EB%A1%A0%ED%8A%B8-1)

[ë°°í¬](https://github.com/pladata-encore/DE30-3nd-1/tree/main?tab=readme-ov-file#%EB%B0%B0%ED%8F%AC)

##  Members 
- ìœ¤ì†Œì˜ 
- ì •ì œìœ¤ 
- ê³½íƒœí˜¸ 
- ì¥ì§€ì›
- ìµœì€ì„œ

# í”„ë¡œì íŠ¸ ê°œìš”


## ğŸ£ í”„ë¡œì íŠ¸ ì†Œê°œ
ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì‚¬ìš©ìê°€ ë°›ê³  ì‹¶ì€ í¸ì§€ ìœ í˜•ì„ ì„ íƒí•˜ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ í¸ì§€ë¥¼ ì‘ì„±í•˜ì—¬ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ë°›ê³  ì‹¶ì€ í¸ì§€ ìœ í˜•ê³¼ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ì…ë ¥í•˜ë©´ ì‚¬ì´íŠ¸ ì‚¬ìš©ì ëˆ„êµ¬ë‚˜ í¸ì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤



### ì„œë¹„ìŠ¤ ì‹œì—°
![](https://velog.velcdn.com/images/devysy55/post/025a9adb-86cb-4501-95e4-6bc474fecd7c/image.gif)



## ğŸ’» í”„ë¡œì íŠ¸ êµ¬ì¡°

ì¶”ê°€ì˜ˆì •

## â­ í”„ë¡œì íŠ¸ ëª©í‘œ
- ìŠ¤í”„ë§ë¶€íŠ¸ í™œìš© ëŠ¥ë ¥ í–¥ìƒ
- api ê°œë°œ, DB ì„¤ê³„ ë“± ë°±ì—”ë“œ ëŠ¥ë ¥ í–¥ìƒ
- í”„ë¡ íŠ¸ ì›¹í˜ì´ì§€ ì œì‘


## ğŸ“– í”„ë¡œì íŠ¸ ê¸°íš
### í”¼ê·¸ë§ˆë¥¼ í™œìš©í•œ ê¸°íšì„œ ì‘ì„±(í™”ë©´ì„¤ê³„ì„œ, ì™€ì´ì–´í”„ë ˆì„)
![](https://velog.velcdn.com/images/devysy55/post/4d0fe97b-f954-46bc-a859-e11c63cd3a51/image.png)

- [figma ë°”ë¡œê°€ê¸° ë§í¬](https://www.figma.com/design/DH4LJTcuM0VVW1bMyVEYxG/3%EC%B0%A8-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8?node-id=0-1&t=YUL0zFJ7tUl3oPJV-1)
- descriptionê¹Œì§€ ì‘ì„±í•œ í™”ë©´ì„¤ê³„ì„œ ì‘ì„±í•˜ì—¬ í˜‘ì—…
<img src='https://velog.velcdn.com/images/devysy55/post/07f4d997-c9c8-4486-bf9c-534d3adabf98/image.png' width=800px></img>


<br>
<br>

### êµ¬ê¸€ ê³µìœ ë¬¸ì„œë¥¼ í™œìš©í•œ DB, API í˜‘ì—…ìš© ë¬¸ì„œ ì‘ì„±

![](https://velog.velcdn.com/images/devysy55/post/99bcae97-0212-4f51-9f53-6df85adb6ff6/image.png)

- ê¸°íš ë‹¨ê³„ ì´í›„ DB, api ê°œë°œì„ ìœ„í•´   DB ì„¤ê³„ì„œ, API ëª…ì„¸ì„œ



# ë°±ì—”ë“œ

<br>

## ë°±ì—”ë“œ ì—¬ëŸ¬ë¶„ ì—¬ê¸°ë‹¤ ë„£ì–´ì¤˜ìš”


<br>
<br>

## Swagger ì—°ë™
#### ìœ¤ì†Œì˜
- SpringDoc OpenAPI Starter WebMVC UI ì‚¬ìš©í•˜ì—¬ Swagger ì—°ë™

```
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.5.0'
````

<img src='https://velog.velcdn.com/images/devysy55/post/e907c885-55f2-4fc8-9720-1c2f9b7bc3c3/image.png' width=600px></img>

## í”„ë¡ íŠ¸ ì‘ì—… ê³¼ì •ì—ì„œ apiì¶”ê°€ ì‘ì—…
#### ìœ¤ì†Œì˜
### @GetMapping("/api/user/idx")
- ë°›ê³  ì‹¶ì€ í¸ì§€ ì„ íƒí•˜ê¸° í™”ë©´ ì œì‘ ì¤‘ resquest ê°’ì— ë¡œê·¸ì¸ í•œ íšŒì›ì˜ idx ì •ë³´ í•„ìš”í•œ ì´ìŠˆ ë°œìƒ
- UserController

```
 public UserController(UserService userService) {
        this.userService = userService;
    }

    @Operation(summary = "ë¡œê·¸ì¸ ìœ ì € Idx ì •ë³´ ê°€ì ¸ì˜´")
    @GetMapping("/api/user/idx")
    public Long getLoggedInUserId(@AuthenticationPrincipal UserDetails userDetails) {
        if (userDetails != null) {
            User user = userService.findByNickname(userDetails.getUsername());
            if (user != null) {
                return user.getIdx_user(); // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ Idx ë°˜í™˜
            }
        }
        return null; // ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°
    }
```
  
## @GetMapping("/letters")
- ë°›ì€ í¸ì§€í•¨ ì‘ì—… ì¤‘ íšŒì›ë³„ ë°›ì€ í¸ì§€ ì¡°íšŒ api ì¶”ê°€
- LetterController
```
  @Operation(summary = "ë¡œê·¸ì¸ íšŒì›ì˜ ë°›ì€ í¸ì§€ ì¡°íšŒ")
    @GetMapping("/letters")
    public String showLettersPage(@AuthenticationPrincipal UserDetails userDetails, Model model) {
        if (userDetails != null) {
            User user = userService.findByNickname(userDetails.getUsername());
            if (user != null) {
                List<Letter> letters = letterService.findLettersByUserId(user.getIdx_user());
                model.addAttribute("letters", letters);
            }
        }
        return "letters";
    }
```

- LetterService
```
public List<Letter> findLettersByUserId(Long userId) {
        return letterRepository.findLettersByUserId(userId);
    }
```

- LetterRepository
```
 @Query("SELECT l FROM Letter l JOIN l.letterType lt WHERE lt.user.idx_user = :userId")
    List<Letter> findLettersByUserId(@Param("userId") Long userId);
```


  
# í”„ë¡ íŠ¸
- HTML, CSS, JavaScript, ê·¸ë¦¬ê³  Thymeleaf í…œí”Œë¦¿ ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„

## ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… í™”ë©´ style ì„¤ì •í•˜ê¸°
### ì •ì œìœ¤

```
<style>
        table {
            width: 280px;
            height: 300px;
            margin: auto;
            font-size: 15px;
            border-collapse: collapse;
        }
        input[type="text"].nickname {
            width: 250px;
            height: 32px;
            font-size: 15px;
            border: 0;
            border-radius: 15px;
            outline: none;
            padding-left: 10px;
            background-color: rgb(233,233,233);
        }
</style>
```

1. ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… í™”ë©´ì˜ ì „ì²´ í…Œì´ë¸” í¬ê¸° ì§€ì • ë° ì˜µì…˜ ì„¤ì •í•˜ê¸°
2. ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… í™”ë©´ì— í‘œì‹œë  í•­ëª©ë³„ë¡œ í´ë˜ìŠ¤ ì„¤ì •í•˜ì—¬ ì ìš©í•  ë””ìì¸ ë° ì˜µì…˜ ì„¤ì •í•˜ê¸°

<br/>

```
<body>
<form th:action="@{/login}" method="post">
    <table>
        <tr>
            <td class="center-text"><h2>ë¡œê·¸ì¸</h2></td> <!-- ê°€ìš´ë° ì •ë ¬ í´ë˜ìŠ¤ ì¶”ê°€ -->
        </tr>
        <tr>
            <td>ë‹‰ë„¤ì„</td>
        </tr>
        <tr>
            <td><input type="text" class="nickname" placeholder=" ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" th:name="username" required></td>
        </tr>
    </table>
</body>
```

1. styleì— ì„¤ì •í•œ ì˜µì…˜ ë° í´ë˜ìŠ¤ ì§€ì •í•˜ì—¬ ë¡œê·¸ì¸ íšŒì›ê°€ì… í™”ë©´ì— êµ¬í˜„í•  ë‚´ìš© bodyì— ì½”ë“œ ì‘ì„±í•˜ê¸°
2. Thymeleaf ì†ì„± ì ìš©í•  ë¶€ë¶„ í‘œê¸°í•˜ê¸° ('th:', '@{/}')
<br/>

### CSS

```
.login {
    width: 280px;
    height: 300px;
    margin: auto;
    font-size: 15px;
    border-collapse: collapse;
    margin: auto;
}
input[type="text"].nickname, input[type="password"].password {
    width: 250px;
    height: 32px;
    font-size: 15px;
    border: 0;
    border-radius: 15px;
    outline: none;
    padding-left: 10px;
    background-color: rgb(233,233,233);
}
input.nickname::placeholder, input.password::placeholder {
    font-size: 12px;
}
```

1. CSSí´ë”ë¥¼ ìƒì„±í•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ ì ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ì„ CSS íŒŒì¼ì— í´ë˜ìŠ¤ë³„ë¡œ ì €ì¥í•˜ê¸°
2. ì¶”ê°€ì ìœ¼ë¡œ ì ìš©í•  ë””ìì¸ ë° ì˜µì…˜ì„ í´ë˜ìŠ¤ í˜•íƒœë¡œ CSSíŒŒì¼ì— ì‘ì„±í•˜ê¸°

<br/>

```
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" type="text/css" th:href="@{css/style.css}">
</head>
```

1. headì— CSSíŒŒì¼ ê²½ë¡œ ì„¤ì •í•˜ê¸°
2. Thymeleaf ì†ì„± ì ìš©í•˜ì—¬ CSSíŒŒì¼ ì—°ê²°í•˜ê¸°
<br/>

```
<body>
<form th:action="@{/login}" method="post">
    <table class = "login">
        <tr>
            <td class="center-text"><h2>ë¡œê·¸ì¸</h2></td>
        </tr>
        <tr>
            <td>ë‹‰ë„¤ì„</td>
        </tr>
        <tr>
            <td><input type="text" class="nickname" placeholder=" ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" th:name="username" required></td>
        </tr>
        <tr>
            <td>ë¹„ë°€ë²ˆí˜¸</td>
        </tr>
        <tr>
            <td><input type="password" class="password" placeholder=" ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" th:name="password" required></td>
        </tr>
        <tr>
            <td><button type="submit" class="btn">ë¡œê·¸ì¸í•˜ê¸°</button></td>
        </tr>
        <tr>
            <td class="join"><a th:href="@{/register}">íšŒì›ê°€ì…</a></td>
        </tr>
    </table>
</form>
</body>
```

1. CSSì— ì‘ì„±í•œ í…Œì´ë¸” ì ìš©í•˜ì—¬ ë¡œê·¸ì¸ íšŒì›ê°€ì… í™”ë©´ì— êµ¬í˜„í•  ë‚´ìš© bodyì— ì½”ë“œ ì‘ì„±í•˜ê¸°
<br/>




## í™ˆ, í¸ì§€í•¨, ë°›ê³ ì‹¶ì€ í¸ì§€ ì„ íƒ, í¸ì§€ì“°ê¸° í™”ë©´ ì œì‘ ë° apiì—°ë™
### ìœ¤ì†Œì˜
### ì£¼ìš” ì‘ì—… ì‚¬í•­
- ë¶€íŠ¸ìŠ¤íŠ¸ë©, ì»¤ìŠ¤í…€cssí™œìš©í•˜ì—¬ ë””ìì¸ ì ìš©
- JavaScript ì‚¬ìš©í•˜ì—¬ ì„œë²„ë¡œë¶€í„° í¸ì§€ í¬ë§ ë“± ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜´
- DOMContentLoaded ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ì„¸ì…˜ ì €ì¥ì†Œì—ì„œ íŠ¹ì • ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜´
- Ajaxë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì„œë²„ì™€ í†µì‹ 
  
###  ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ ì¼ë¶€
```
  document.addEventListener('DOMContentLoaded', function () {
        fetch('/api/lettertype/want')
            .then(response => response.json())
            .then(data => {
                // ë°ì´í„°ë¥¼ ë‚ ì§œë³„ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
                data.sort((a, b) => {
                    return new Date(b.date_receive) - new Date(a.date_receive);
                });

                const letterWishList = document.getElementById('letter-wish-list');
                data.forEach(item => {
                    if (item.comment !== null && item.comment !== "null") {
                        const listItem = document.createElement('li');
                        listItem.className = 'list-group-item';
                        const categoryColor = getCategoryColor(item.category[0]);
                        listItem.innerHTML = `
                            <span style="font-size: 13px; color: ${categoryColor};">${getCategoryText(item.category[0])}</span>
                            <span style="font-size: 13px;">  ${item.nickname}</span><br>

                            ${item.comment}<br>
                            <span style="font-size: 13px;">${item.date_receive ? new Date(new Date(item.date_receive).getTime() + (9 * 60 * 60 * 1000)).toLocaleString('ko-KR', {
                                timeZone: 'Asia/Seoul',
                                year: 'numeric',
                                month: '2-digit',
                                day: '2-digit',
                                hour12: false,
                                hour: '2-digit',
                                minute: '2-digit'
                            }) : 'ë‚ ì§œ ì •ë³´ ì—†ìŒ'}</span>
                        `;
                        listItem.addEventListener('click', function() {
                            if (!isAuthenticated()) {
                                window.location.href = '/login';
                            } else {
                                // ì„ íƒëœ í•­ëª©ì˜ ì •ë³´ë¥¼ sessionStorageì— ì €ì¥í•©ë‹ˆë‹¤.
                                sessionStorage.setItem('selectedLetter', JSON.stringify(item));
                                window.location.href = '/write';
                            }
                        });
                        letterWishList.appendChild(listItem);
                    }
                });
            });
    });

    function isAuthenticated() {
        return document.getElementById('isAuthenticated').value === 'true';
    }

    function getCategoryText(category) {
        switch(category) {
            case 1: return 'ì¬ë°ŒëŠ” ì–˜ê¸°í•´ ì£¼ì„¸ìš”ğŸ˜„';
            case 2: return 'ìœ„ë¡œ ë°›ê³  ì‹¶ì–´ìš”ğŸ˜¥';
            case 3: return 'ê³ ë¯¼ ìˆì–´ìš” ì¡°ì–¸í•´ ì£¼ì„¸ìš”ğŸ˜¯';
            case 4: return 'ì•„ë¬´ë§ ëŒ€ì”ì¹˜ğŸŸ';
            default: return 'ê¸°íƒ€';
        }
    }

    function getCategoryColor(category) {
        switch(category) {
            case 1: return 'blue';
            case 2: return 'green';
            case 3: return 'orange';
            case 4: return 'red';
            default: return 'black';
        }
    }
 ```
  
  
## ê°œì„  ì˜ˆì •
- ì½”ë“œ êµ¬ì¡° ê°œì„ 
  - JavaScript ì½”ë“œ ëª¨ë“ˆí™”
  - í•¨ìˆ˜ ë¦¬íŒ©í† ë§
- ìŠ¤íƒ€ì¼ ê°œì„ 
  - ë°˜ì‘í˜• ë””ìì¸ ë“± ìŠ¤íƒ€ì¼ ê°œì„ 
- ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
  - ì„œë²„ì™€ì˜ í†µì‹ ì´ ì‹¤íŒ¨í•  ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ë„ë¡ ì—ëŸ¬ ì²˜ë¦¬
  
<br> 
  
# ë°°í¬
- https://cloudtype.io/ í™œìš© ì„œë²„ ë°°í¬(ë¬´ë£Œ ë²„ì „ ì‚¬ìš©)
 ![](https://velog.velcdn.com/images/devysy55/post/bbf7ba7a-d606-4600-bd82-dd028869dc40/image.png)

